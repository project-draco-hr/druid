{
  final String service=serviceName(key);
  log.info("Unregistering chat handler: %s",key);
  final ChatHandler handler=handlers.get(key);
  if (handler == null) {
    log.warn("handler not currently registered, ignoring: %s",key);
  }
  try {
    serviceAnnouncer.unannounce(service);
  }
 catch (  Exception e) {
    log.warn(e,"Failed to unregister service: %s",service);
  }
  handlers.remove(key,handler);
}
