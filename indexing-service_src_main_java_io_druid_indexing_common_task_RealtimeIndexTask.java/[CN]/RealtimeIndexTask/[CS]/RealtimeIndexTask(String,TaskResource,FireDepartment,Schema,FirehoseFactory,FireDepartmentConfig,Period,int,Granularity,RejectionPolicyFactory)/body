{
  super(id == null ? makeTaskId(fireDepartment,schema) : id,String.format("index_realtime_%s",makeDatasource(fireDepartment,schema)),taskResource == null ? new TaskResource(makeTaskId(fireDepartment,schema),1) : taskResource,makeDatasource(fireDepartment,schema));
  if (fireDepartment != null) {
    this.schema=fireDepartment;
  }
 else {
    this.schema=new FireDepartment(new DataSchema(schema.getDataSource(),firehoseFactory == null ? null : firehoseFactory.getParser(),schema.getAggregators(),new UniformGranularitySpec(segmentGranularity,schema.getIndexGranularity(),null,segmentGranularity)),new RealtimeIOConfig(firehoseFactory,null),new RealtimeDriverConfig(fireDepartmentConfig == null ? null : fireDepartmentConfig.getMaxRowsInMemory(),fireDepartmentConfig == null ? null : fireDepartmentConfig.getIntermediatePersistPeriod(),windowPeriod,null,null,rejectionPolicyFactory,maxPendingPersists,schema.getShardSpec()),null,null,null,null);
  }
}
