{
  super(ImmutableList.of(new DruidMasterSegmentInfoLoader(DruidMaster.this),new DruidMasterVersionConverter(indexingServiceClient,whitelistRef),new DruidMasterSegmentMerger(indexingServiceClient,whitelistRef),new DruidMasterHelper(){
    @Override public DruidMasterRuntimeParams run(    DruidMasterRuntimeParams params){
      MasterStats stats=params.getMasterStats();
      log.info("Issued merge requests for %s segments",stats.getGlobalStats().get("mergedCount").get());
      params.getEmitter().emit(new ServiceMetricEvent.Builder().build("master/merge/count",stats.getGlobalStats().get("mergedCount")));
      return params;
    }
  }
));
}
