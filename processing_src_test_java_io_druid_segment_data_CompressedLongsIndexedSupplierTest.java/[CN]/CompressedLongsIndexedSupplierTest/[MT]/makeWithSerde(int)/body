{
  CloseQuietly.close(indexed);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  final CompressedLongsIndexedSupplier theSupplier=CompressedLongsIndexedSupplier.fromLongBuffer(LongBuffer.wrap(vals),chunkSize,ByteOrder.nativeOrder(),compressionStrategy);
  theSupplier.writeToChannel(Channels.newChannel(baos));
  final byte[] bytes=baos.toByteArray();
  Assert.assertEquals(theSupplier.getSerializedSize(),bytes.length);
  supplier=CompressedLongsIndexedSupplier.fromByteBuffer(ByteBuffer.wrap(bytes),ByteOrder.nativeOrder());
  indexed=supplier.get();
}
