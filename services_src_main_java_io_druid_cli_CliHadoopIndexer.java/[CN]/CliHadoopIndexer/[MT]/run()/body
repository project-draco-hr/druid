{
  try {
    LogLevelAdjuster.register();
    final Injector injector=Initialization.makeInjectorWithModules(getBaseInjector(),getModules());
    final Lifecycle lifecycle=injector.getInstance(Lifecycle.class);
    final HadoopDruidIndexerJob job=injector.getInstance(HadoopDruidIndexerJob.class);
    try {
      lifecycle.start();
    }
 catch (    Throwable t) {
      log.error(t,"Error when starting up.  Failing.");
      System.exit(1);
    }
    job.run();
    try {
      lifecycle.stop();
    }
 catch (    Throwable t) {
      log.error(t,"Error when stopping. Failing.");
      System.exit(1);
    }
  }
 catch (  Exception e) {
    throw com.google.common.base.Throwables.propagate(e);
  }
}
