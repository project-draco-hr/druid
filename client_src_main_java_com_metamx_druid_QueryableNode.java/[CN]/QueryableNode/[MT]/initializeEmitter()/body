{
  if (emitter == null) {
    final HttpClient httpClient=HttpClientInit.createClient(HttpClientConfig.builder().withNumConnections(1).withReadTimeout(new Duration(PropUtils.getProperty(props,"druid.emitter.timeOut"))).build(),lifecycle);
    setEmitter(new ServiceEmitter(PropUtils.getProperty(props,"druid.service"),PropUtils.getProperty(props,"druid.host"),Emitters.create(props,httpClient,jsonMapper,lifecycle)));
  }
  EmittingLogger.registerEmitter(emitter);
}
