{
  if (serverInventoryView == null) {
    final ExecutorService exec=Executors.newFixedThreadPool(1,new ThreadFactoryBuilder().setDaemon(true).setNameFormat("ServerInventoryView-%s").build());
    final ServerInventoryViewConfig serverInventoryViewConfig=getConfigFactory().build(ServerInventoryViewConfig.class);
    final String announcerType=serverInventoryViewConfig.getAnnouncerType();
    if ("legacy".equalsIgnoreCase(announcerType)) {
      serverInventoryView=new SingleServerInventoryView(getZkPaths(),getCuratorFramework(),getJsonMapper());
    }
 else     if ("batch".equalsIgnoreCase(announcerType)) {
      serverInventoryView=new BatchServerInventoryView(getZkPaths(),getCuratorFramework(),getJsonMapper());
    }
 else {
      throw new IAE("Unknown type %s",announcerType);
    }
    lifecycle.addManagedInstance(serverInventoryView);
  }
}
