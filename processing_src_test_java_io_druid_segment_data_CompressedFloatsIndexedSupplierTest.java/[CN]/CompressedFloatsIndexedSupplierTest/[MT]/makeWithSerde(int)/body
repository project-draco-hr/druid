{
  CloseQuietly.close(indexed);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  final CompressedFloatsIndexedSupplier theSupplier=CompressedFloatsIndexedSupplier.fromFloatBuffer(FloatBuffer.wrap(vals),chunkSize,ByteOrder.nativeOrder(),compressionStrategy);
  theSupplier.writeToChannel(Channels.newChannel(baos));
  final byte[] bytes=baos.toByteArray();
  Assert.assertEquals(theSupplier.getSerializedSize(),bytes.length);
  supplier=CompressedFloatsIndexedSupplier.fromByteBuffer(ByteBuffer.wrap(bytes),ByteOrder.nativeOrder());
  indexed=supplier.get();
}
