{
  File tmpDir=File.createTempFile("emptyIndex","");
  if (!tmpDir.delete()) {
    throw new IllegalStateException("tmp delete failed");
  }
  if (!tmpDir.mkdir()) {
    throw new IllegalStateException("tmp mkdir failed");
  }
  tmpDir.deleteOnExit();
  IncrementalIndex emptyIndex=new IncrementalIndex(0,QueryGranularity.NONE,new AggregatorFactory[0]);
  IncrementalIndexAdapter emptyIndexAdapter=new IncrementalIndexAdapter(new Interval("2012-08-01/P3D"),emptyIndex);
  IndexMerger.merge(Lists.<IndexableAdapter>newArrayList(emptyIndexAdapter),new AggregatorFactory[0],tmpDir);
  MMappedIndex emptyIndexMMapped=IndexIO.mapDir(tmpDir);
  Assert.assertEquals("getAvailableDimensions",0,Iterables.size(emptyIndexMMapped.getAvailableDimensions()));
  Assert.assertEquals("getAvailableMetrics",0,Iterables.size(emptyIndexMMapped.getAvailableMetrics()));
  Assert.assertEquals("getDataInterval",new Interval("2012-08-01/P3D"),emptyIndexMMapped.getDataInterval());
  Assert.assertEquals("getReadOnlyTimestamps",0,emptyIndexMMapped.getReadOnlyTimestamps().size());
}
