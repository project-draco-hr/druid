{
  QueryRunner<T> queryRunner=null;
  for (  final ThreadPoolTaskRunnerWorkItem taskRunnerWorkItem : ImmutableList.copyOf(runningItems)) {
    final Task task=taskRunnerWorkItem.getTask();
    if (task.getDataSource().equals(query.getDataSource())) {
      final QueryRunner<T> taskQueryRunner=task.getQueryRunner(query);
      if (taskQueryRunner != null) {
        if (queryRunner == null) {
          queryRunner=taskQueryRunner;
        }
 else {
          log.makeAlert("Found too many query runners for datasource").addData("dataSource",query.getDataSource()).emit();
        }
      }
    }
  }
  return queryRunner == null ? new NoopQueryRunner<T>() : queryRunner;
}
