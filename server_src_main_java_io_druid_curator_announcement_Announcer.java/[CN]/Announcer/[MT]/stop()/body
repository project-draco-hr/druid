{
synchronized (toAnnounce) {
    if (!started) {
      return;
    }
    started=false;
    for (    Map.Entry<String,PathChildrenCache> entry : listeners.entrySet()) {
      CloseQuietly.close(entry.getValue());
    }
    for (    Map.Entry<String,ConcurrentMap<String,byte[]>> entry : announcements.entrySet()) {
      String basePath=entry.getKey();
      for (      String announcementPath : entry.getValue().keySet()) {
        unannounce(ZKPaths.makePath(basePath,announcementPath));
      }
    }
    for (    String parent : parentsIBuilt) {
      try {
        curator.delete().forPath(parent);
      }
 catch (      Exception e) {
        log.info(e,"Unable to delete parent[%s], boooo.",parent);
      }
    }
  }
}
