{
  final TeslaAether aether=getAetherClient(config);
  List<T> retVal=Lists.newArrayList();
  if (config.searchCurrentClassloader()) {
    for (    T module : ServiceLoader.load(clazz,Initialization.class.getClassLoader())) {
      log.info("Adding local module[%s]",module.getClass());
      retVal.add(module);
    }
  }
  for (  String coordinate : config.getCoordinates()) {
    log.info("Loading extension[%s] for class[%s]",coordinate,clazz.getName());
    try {
      URLClassLoader loader=getClassLoaderForCoordinates(aether,coordinate);
      final ServiceLoader<T> serviceLoader=ServiceLoader.load(clazz,loader);
      for (      T module : serviceLoader) {
        log.info("Adding extension module[%s] for class[%s]",module.getClass(),clazz.getName());
        retVal.add(module);
      }
    }
 catch (    Exception e) {
      throw Throwables.propagate(e);
    }
  }
  if (clazz.equals(DruidModule.class)) {
    loadedDruidModules.addAll(retVal);
  }
  return retVal;
}
