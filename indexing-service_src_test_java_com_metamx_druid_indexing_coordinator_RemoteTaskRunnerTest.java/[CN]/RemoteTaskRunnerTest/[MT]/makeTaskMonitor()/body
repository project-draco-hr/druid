{
  workerCuratorCoordinator=new WorkerCuratorCoordinator(jsonMapper,new ZkPathsConfig(){
    @Override public String getZkBasePath(){
      return basePath;
    }
  }
,new TestRemoteTaskRunnerConfig(),cf,worker);
  workerCuratorCoordinator.start();
  final File tmp=Files.createTempDir();
  workerTaskMonitor=new WorkerTaskMonitor(jsonMapper,cf,workerCuratorCoordinator,new ThreadPoolTaskRunner(new TaskToolboxFactory(new TaskConfig(tmp.toString(),null,null,0),null,null,null,null,null,null,null,null,null,jsonMapper)),new WorkerConfig().setCapacity(1));
  jsonMapper.registerSubtypes(new NamedType(TestTask.class,"test"));
  jsonMapper.registerSubtypes(new NamedType(TestRealtimeTask.class,"test_realtime"));
  workerTaskMonitor.start();
}
