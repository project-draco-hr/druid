{
  if (cache == null) {
    String cacheType=getConfigFactory().build(CacheConfig.class).getType();
    if (cacheType.equals(CACHE_TYPE_LOCAL)) {
      setCache(MapCache.create(getConfigFactory().buildWithReplacements(MapCacheConfig.class,ImmutableMap.of("prefix",CACHE_PROPERTY_PREFIX))));
    }
 else     if (cacheType.equals(CACHE_TYPE_MEMCACHED)) {
      setCache(MemcachedCache.create(getConfigFactory().buildWithReplacements(MemcachedCacheConfig.class,ImmutableMap.of("prefix",CACHE_PROPERTY_PREFIX))));
    }
 else {
      throw new ISE("Unknown cache type [%s]",cacheType);
    }
  }
}
