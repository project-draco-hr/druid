{
  final List<Map<String,Object>> dbTaskLocks=handler.getTaskLocks(dbTables.getTaskLockTable(),taskid);
  final Map<Long,TaskLock> retMap=Maps.newHashMap();
  for (  final Map<String,Object> row : dbTaskLocks) {
    try {
      retMap.put((Long)row.get("id"),jsonMapper.readValue((byte[])row.get("lock_payload"),TaskLock.class));
    }
 catch (    Exception e) {
      log.makeAlert(e,"Failed to deserialize TaskLock").addData("task",taskid).addData("lockPayload",row).emit();
    }
  }
  return retMap;
}
