{
  this.serviceName=serviceName;
  if (serviceName == null) {
    this.oldServiceName=String.format(config.getFirehoseIdPrefix(),Preconditions.checkNotNull(firehoseId,"firehoseId"));
  }
 else {
    this.oldServiceName=null;
  }
  this.bufferSize=bufferSize == null || bufferSize <= 0 ? DEFAULT_BUFFER_SIZE : bufferSize;
  this.parser=Preconditions.checkNotNull(parser,"parser");
  this.chatHandlerProvider=Optional.fromNullable(chatHandlerProvider);
}
