{
  if (serviceName == null) {
    this.serviceName=String.format("%s:%s",config.getFirehoseIdPrefix(),Preconditions.checkNotNull(firehoseId,"firehoseId"));
  }
 else {
    this.serviceName=Preconditions.checkNotNull(serviceName,"serviceName");
  }
  this.config=config;
  this.bufferSize=bufferSize == null || bufferSize <= 0 ? DEFAULT_BUFFER_SIZE : bufferSize;
  this.parser=Preconditions.checkNotNull(parser,"parser");
  this.chatHandlerProvider=Optional.fromNullable(chatHandlerProvider);
}
