{
  Iterator<Map.Entry<SegmentCallback,Executor>> iter=segmentCallbacks.entrySet().iterator();
  while (iter.hasNext()) {
    final Map.Entry<SegmentCallback,Executor> entry=iter.next();
    entry.getValue().execute(new Runnable(){
      @Override public void run(){
        if (CallbackAction.UNREGISTER == entry.getKey().segmentAdded(server,segment)) {
          segmentCallbacks.remove(entry.getKey());
        }
      }
    }
);
  }
}
