{
  EmittingLogger.registerEmitter(new NoopServiceEmitter());
  queryWaitLatch=new CountDownLatch(1);
  queryNotifyLatch=new CountDownLatch(1);
  factory=new ConcurrencyTestQueryRunnerFactory(queryWaitLatch,queryNotifyLatch);
  serverManager=new TestServerManager(factory);
  serverManager.loadQueryable("test","1",new Interval("P1d/2011-04-01"));
  serverManager.loadQueryable("test","1",new Interval("P1d/2011-04-02"));
  serverManager.loadQueryable("test","2",new Interval("P1d/2011-04-02"));
  serverManager.loadQueryable("test","1",new Interval("P1d/2011-04-03"));
  serverManager.loadQueryable("test","1",new Interval("P1d/2011-04-04"));
  serverManager.loadQueryable("test","1",new Interval("P1d/2011-04-05"));
  serverManager.loadQueryable("test","2",new Interval("PT1h/2011-04-04T01"));
  serverManager.loadQueryable("test","2",new Interval("PT1h/2011-04-04T02"));
  serverManager.loadQueryable("test","2",new Interval("PT1h/2011-04-04T03"));
  serverManager.loadQueryable("test","2",new Interval("PT1h/2011-04-04T05"));
  serverManager.loadQueryable("test","2",new Interval("PT1h/2011-04-04T06"));
  serverManager.loadQueryable("test2","1",new Interval("P1d/2011-04-01"));
  serverManager.loadQueryable("test2","1",new Interval("P1d/2011-04-02"));
}
