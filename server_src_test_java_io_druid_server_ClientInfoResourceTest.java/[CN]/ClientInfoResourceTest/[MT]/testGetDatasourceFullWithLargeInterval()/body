{
  Map<String,Object> actual=resource.getDatasource(dataSource,"1975/2050","true");
  Map<String,Object> expected=ImmutableMap.<String,Object>builder().put("2014-02-13T00:00:00.000Z/2014-02-15T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d1"),KEY_METRICS,ImmutableSet.of("m1"))).put("2014-02-16T00:00:00.000Z/2014-02-17T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d1"),KEY_METRICS,ImmutableSet.of("m1"))).put("2014-02-17T00:00:00.000Z/2014-02-18T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d2"),KEY_METRICS,ImmutableSet.of("m2"))).put("2015-02-01T00:00:00.000Z/2015-02-03T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d1"),KEY_METRICS,ImmutableSet.of("m1"))).put("2015-02-03T00:00:00.000Z/2015-02-05T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d1","d2","d3"),KEY_METRICS,ImmutableSet.of("m1","m2","m3"))).put("2015-02-05T00:00:00.000Z/2015-02-09T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d1"),KEY_METRICS,ImmutableSet.of("m1"))).put("2015-02-09T00:00:00.000Z/2015-02-10T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d1","d3"),KEY_METRICS,ImmutableSet.of("m1","m3"))).put("2015-02-10T00:00:00.000Z/2015-02-11T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d1"),KEY_METRICS,ImmutableSet.of("m1"))).put("2015-02-11T00:00:00.000Z/2015-02-12T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d3"),KEY_METRICS,ImmutableSet.of("m3"))).put("2015-02-12T00:00:00.000Z/2015-02-13T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d1"),KEY_METRICS,ImmutableSet.of("m1"))).put("2015-03-13T00:00:00.000Z/2015-03-19T00:00:00.000Z",ImmutableMap.of(KEY_DIMENSIONS,ImmutableSet.of("d1"),KEY_METRICS,ImmutableSet.of("m1"))).build();
  EasyMock.verify(serverInventoryView,timelineServerView);
  Assert.assertEquals(expected,actual);
}
