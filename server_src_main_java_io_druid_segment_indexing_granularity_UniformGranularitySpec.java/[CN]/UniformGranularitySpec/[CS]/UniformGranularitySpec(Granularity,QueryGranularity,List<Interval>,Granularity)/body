{
  this.segmentGranularity=segmentGranularity == null ? granularity : segmentGranularity;
  this.queryGranularity=queryGranularity;
  if (inputIntervals != null) {
    List<Interval> granularIntervals=Lists.newArrayList();
    for (    Interval inputInterval : inputIntervals) {
      Iterables.addAll(granularIntervals,granularity.getIterable(inputInterval));
    }
    this.inputIntervals=ImmutableList.copyOf(inputIntervals);
    this.wrappedSpec=new ArbitraryGranularitySpec(granularIntervals);
  }
 else {
    this.inputIntervals=null;
    this.wrappedSpec=null;
  }
}
