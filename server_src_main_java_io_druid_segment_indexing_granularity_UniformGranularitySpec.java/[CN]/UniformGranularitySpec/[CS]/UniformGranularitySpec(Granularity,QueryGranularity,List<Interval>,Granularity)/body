{
  if (segmentGranularity != null) {
    this.segmentGranularity=segmentGranularity;
  }
 else   if (granularity != null) {
    this.segmentGranularity=granularity;
  }
 else {
    this.segmentGranularity=defaultSegmentGranularity;
  }
  this.queryGranularity=queryGranularity == null ? defaultQueryGranularity : queryGranularity;
  if (inputIntervals != null) {
    List<Interval> granularIntervals=Lists.newArrayList();
    for (    Interval inputInterval : inputIntervals) {
      Iterables.addAll(granularIntervals,this.segmentGranularity.getIterable(inputInterval));
    }
    this.inputIntervals=ImmutableList.copyOf(inputIntervals);
    this.wrappedSpec=new ArbitraryGranularitySpec(queryGranularity,granularIntervals);
  }
 else {
    this.inputIntervals=null;
    this.wrappedSpec=null;
  }
}
