{
  final CountDownLatch latch=new CountDownLatch(1);
  Futures.addCallback(future,new FutureCallback<Object>(){
    @Override public void onSuccess(    Object result){
      latch.countDown();
    }
    @Override public void onFailure(    Throwable t){
      try {
        log.error(t,"Error waiting");
        throw Throwables.propagate(t);
      }
  finally {
        latch.countDown();
      }
    }
  }
);
  latch.await();
}
