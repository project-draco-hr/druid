{
  doSetup();
  Future<TaskStatus> future=remoteTaskRunner.run(task);
  Assert.assertTrue(taskAnnounced(task.getId()));
  mockWorkerRunningTask(task);
  Assert.assertTrue(workerRunningTask(task.getId()));
  cf.delete().forPath(announcementsPath);
  TaskStatus status=future.get(TIMEOUT_SECONDS,TimeUnit.SECONDS);
  Assert.assertEquals(TaskStatus.Status.FAILED,status.getStatusCode());
}
