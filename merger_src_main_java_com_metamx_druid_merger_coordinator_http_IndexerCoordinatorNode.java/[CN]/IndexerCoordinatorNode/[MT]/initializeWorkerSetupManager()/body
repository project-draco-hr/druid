{
  if (workerSetupManager == null) {
    final DbConnectorConfig dbConnectorConfig=configFactory.build(DbConnectorConfig.class);
    final DBI dbi=new DbConnector(dbConnectorConfig).getDBI();
    final WorkerSetupManagerConfig workerSetupManagerConfig=configFactory.build(WorkerSetupManagerConfig.class);
    DbConnector.createWorkerSetupTable(dbi,workerSetupManagerConfig.getWorkerSetupTable());
    workerSetupManager=new WorkerSetupManager(dbi,Executors.newScheduledThreadPool(1,new ThreadFactoryBuilder().setDaemon(true).setNameFormat("WorkerSetupManagerExec--%d").build()),jsonMapper,workerSetupManagerConfig);
  }
  lifecycle.addManagedInstance(workerSetupManager);
}
