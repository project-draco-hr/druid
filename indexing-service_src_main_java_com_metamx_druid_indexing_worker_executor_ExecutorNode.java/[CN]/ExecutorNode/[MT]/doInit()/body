{
  initializeHttpClient();
  initializeS3Service();
  initializeMergerConfig();
  initializeServiceDiscovery();
  initializeDataSegmentPusher();
  initializeMonitorScheduler();
  initializeTaskToolbox();
  initializeTaskRunner();
  initializeChatHandlerProvider();
  initializeJacksonInjections();
  initializeJacksonSubtypes();
  initializeServer();
  executorLifecycle=executorLifecycleFactory.build(taskRunner,getJsonMapper());
  lifecycle.addManagedInstance(executorLifecycle);
  final Injector injector=Guice.createInjector(new ExecutorServletModule(getJsonMapper(),chatHandlerProvider));
  final Context root=new Context(server,"/",Context.SESSIONS);
  root.addServlet(new ServletHolder(new StatusServlet()),"/status");
  root.addServlet(new ServletHolder(new DefaultServlet()),"/*");
  root.addEventListener(new GuiceServletConfig(injector));
  root.addFilter(GuiceFilter.class,"/druid/worker/v1/*",0);
  root.addServlet(new ServletHolder(new QueryServlet(getJsonMapper(),getSmileMapper(),taskRunner,getEmitter(),getRequestLogger())),"/druid/v2/*");
}
