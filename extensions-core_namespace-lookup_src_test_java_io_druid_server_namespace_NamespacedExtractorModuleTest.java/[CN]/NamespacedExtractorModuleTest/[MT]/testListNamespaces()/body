{
  final File tmpFile=temporaryFolder.newFile();
  try (OutputStreamWriter out=new FileWriter(tmpFile)){
    out.write(mapper.writeValueAsString(ImmutableMap.<String,String>of("foo","bar")));
  }
   final URIExtractionNamespace namespace=new URIExtractionNamespace("ns",tmpFile.toURI(),new URIExtractionNamespace.ObjectMapperFlatDataParser(URIExtractionNamespaceTest.registerTypes(new DefaultObjectMapper())),new Period(0),null);
  cacheManager.scheduleOrUpdate(ImmutableList.<ExtractionNamespace>of(namespace));
  Collection<String> strings=cacheManager.getKnownNamespaces();
  Assert.assertArrayEquals(new String[]{"ns"},strings.toArray(new String[strings.size()]));
  while (!Arrays.equals(cacheManager.getKnownNamespaces().toArray(),new Object[]{"ns"})) {
    Thread.sleep(1);
  }
}
