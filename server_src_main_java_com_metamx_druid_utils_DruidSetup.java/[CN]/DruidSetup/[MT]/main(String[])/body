{
  CuratorFramework curator=null;
  try {
    if (args.length < 2 || args.length > 3) {
      printUsage();
      System.exit(1);
    }
    String cmd=args[0];
    if ("dump".equals(cmd) && args.length == 3) {
      final String zkConnect=args[1];
      curator=connectToZK(zkConnect);
      String zpathBase=args[2];
      dumpFromZk(curator,zkConnect,zpathBase,System.out);
    }
 else     if ("put".equals(cmd) && args.length == 3) {
      final String zkConnect=args[1];
      curator=connectToZK(zkConnect);
      final String pfile=args[2];
      putToZk(curator,pfile);
    }
 else {
      printUsage();
      System.exit(1);
    }
  }
  finally {
    Closeables.closeQuietly(curator);
  }
}
