{
  LogLevelAdjuster.register();
  Injector injector=Initialization.makeInjector(new LifecycleModule().register(DruidMaster.class),EmitterModule.class,HttpClientModule.class,DbConnectorModule.class,JacksonConfigManagerModule.class,CuratorModule.class,new MetricsModule(),new DiscoveryModule().register(Self.class),ServerModule.class,new JettyServerModule(new MasterJettyServerInitializer()).addResource(InfoResource.class).addResource(MasterResource.class).addResource(StatusResource.class),CoordinatorModule.class);
  final Lifecycle lifecycle=injector.getInstance(Lifecycle.class);
  try {
    lifecycle.start();
  }
 catch (  Throwable t) {
    log.error(t,"Error when starting up.  Failing.");
    System.exit(1);
  }
  lifecycle.join();
}
