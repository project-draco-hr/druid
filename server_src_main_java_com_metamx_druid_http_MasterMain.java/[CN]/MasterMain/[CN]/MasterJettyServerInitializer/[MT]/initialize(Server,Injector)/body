{
  try {
    ResourceHandler resourceHandler=new ResourceHandler();
    resourceHandler.setResourceBase(MasterMain.class.getClassLoader().getResource("static").toExternalForm());
    final ServletContextHandler root=new ServletContextHandler(ServletContextHandler.SESSIONS);
    root.setContextPath("/");
    HandlerList handlerList=new HandlerList();
    handlerList.setHandlers(new Handler[]{resourceHandler,root,new DefaultHandler()});
    server.setHandler(handlerList);
    root.addServlet(new ServletHolder(new DefaultServlet()),"/*");
    root.addFilter(GzipFilter.class,"/*",null);
    root.addFilter(new FilterHolder(injector.getInstance(RedirectFilter.class)),"/*",null);
    root.addFilter(GuiceFilter.class,"/*",null);
  }
 catch (  ConfigurationException e) {
    throw new ProvisionException(Iterables.getFirst(e.getErrorMessages(),null).getMessage());
  }
}
