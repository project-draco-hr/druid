{
  Indexed<String> allDimVals=selector.getDimensionValues(dimension);
  final List<Filter> filters=Lists.newArrayList();
  if (allDimVals == null) {
    allDimVals=new Indexed<String>(){
      @Override public Iterator<String> iterator(){
        return null;
      }
      @Override public Class<? extends String> getClazz(){
        return null;
      }
      @Override public int size(){
        return 1;
      }
      @Override public String get(      int index){
        return null;
      }
      @Override public int indexOf(      String value){
        return 0;
      }
    }
;
  }
  for (int i=0; i < allDimVals.size(); i++) {
    String dimVal=allDimVals.get(i);
    if (value.equals(Strings.nullToEmpty(fn.apply(dimVal)))) {
      filters.add(new SelectorFilter(dimension,dimVal));
    }
  }
  return filters;
}
