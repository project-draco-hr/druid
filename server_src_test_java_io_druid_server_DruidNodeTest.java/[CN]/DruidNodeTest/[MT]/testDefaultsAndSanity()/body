{
  final String service="test/service";
  DruidNode node;
  node=new DruidNode(service,null,null);
  Assert.assertEquals(DruidNode.getDefaultHost(),node.getHost());
  Assert.assertEquals(-1,node.getPort());
  Assert.assertEquals(HostAndPort.fromString(DruidNode.getDefaultHost()).toString(),node.getHostAndPort());
  node=new DruidNode(service,"2001:db8:85a3::8a2e:370:7334",-1);
  Assert.assertEquals("2001:db8:85a3::8a2e:370:7334",node.getHost());
  Assert.assertEquals(-1,node.getPort());
  Assert.assertEquals("[2001:db8:85a3::8a2e:370:7334]",node.getHostAndPort());
  node=new DruidNode(service,"abc:123",null);
  Assert.assertEquals("abc",node.getHost());
  Assert.assertEquals(123,node.getPort());
  Assert.assertEquals("abc:123",node.getHostAndPort());
  node=new DruidNode(service,"2001:db8:85a3::8a2e:370:7334",null);
  Assert.assertEquals("2001:db8:85a3::8a2e:370:7334",node.getHost());
  Assert.assertTrue(8080 <= node.getPort());
  node=new DruidNode(service,"[2001:db8:85a3::8a2e:370:7334]",null);
  Assert.assertEquals("2001:db8:85a3::8a2e:370:7334",node.getHost());
  Assert.assertTrue(8080 <= node.getPort());
  node=new DruidNode(service,"abc",null);
  Assert.assertEquals("abc",node.getHost());
  Assert.assertTrue(8080 <= node.getPort());
  node=new DruidNode(service,"abc",123);
  Assert.assertEquals("abc",node.getHost());
  Assert.assertEquals(123,node.getPort());
  Assert.assertEquals("abc:123",node.getHostAndPort());
  node=new DruidNode(service,"abc:123",123);
  Assert.assertEquals("abc",node.getHost());
  Assert.assertEquals(123,node.getPort());
  Assert.assertEquals("abc:123",node.getHostAndPort());
  node=new DruidNode(service,"[2001:db8:85a3::8a2e:370:7334]:123",null);
  Assert.assertEquals("2001:db8:85a3::8a2e:370:7334",node.getHost());
  Assert.assertEquals(123,node.getPort());
  Assert.assertEquals("[2001:db8:85a3::8a2e:370:7334]:123",node.getHostAndPort());
  node=new DruidNode(service,"2001:db8:85a3::8a2e:370:7334",123);
  Assert.assertEquals("2001:db8:85a3::8a2e:370:7334",node.getHost());
  Assert.assertEquals(123,node.getPort());
  Assert.assertEquals("[2001:db8:85a3::8a2e:370:7334]:123",node.getHostAndPort());
  node=new DruidNode(service,"[2001:db8:85a3::8a2e:370:7334]",123);
  Assert.assertEquals("2001:db8:85a3::8a2e:370:7334",node.getHost());
  Assert.assertEquals(123,node.getPort());
  Assert.assertEquals("[2001:db8:85a3::8a2e:370:7334]:123",node.getHostAndPort());
  node=new DruidNode(service,null,123);
  Assert.assertEquals(DruidNode.getDefaultHost(),node.getHost());
  Assert.assertEquals(123,node.getPort());
}
