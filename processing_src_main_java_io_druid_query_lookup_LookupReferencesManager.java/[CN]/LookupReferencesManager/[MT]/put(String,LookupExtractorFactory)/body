{
synchronized (lock) {
    assertStarted();
    if (lookupMap.containsKey(lookupName)) {
      LOGGER.warn("lookup [%s] is not add, another lookup with the same name already exist",lookupName);
      return false;
    }
    if (!lookupExtractorFactory.start()) {
      throw new ISE("start method returned false for lookup [%s]",lookupName);
    }
    boolean isAdded=(null == lookupMap.putIfAbsent(lookupName,lookupExtractorFactory));
    if (isAdded && lookupSnapshotTaker != null) {
      lookupSnapshotTaker.takeSnapshot(getAllAsList());
    }
    return isAdded;
  }
}
