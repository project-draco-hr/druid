{
  final QueuedThreadPool threadPool=new QueuedThreadPool();
  threadPool.setMinThreads(config.getNumThreads());
  threadPool.setMaxThreads(config.getNumThreads());
  final Server server=new Server();
  server.setThreadPool(threadPool);
  SelectChannelConnector connector=new SelectChannelConnector();
  connector.setPort(node.getPort());
  connector.setMaxIdleTime(Ints.checkedCast(config.getMaxIdleTime().toStandardDuration().getMillis()));
  connector.setStatsOn(true);
  connector.setAcceptors(config.getNumThreads());
  server.setConnectors(new Connector[]{connector});
  return server;
}
