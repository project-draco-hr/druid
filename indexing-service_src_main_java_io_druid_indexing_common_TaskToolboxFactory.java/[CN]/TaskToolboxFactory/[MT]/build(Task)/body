{
  final File taskWorkDir=new File(new File(config.getBaseTaskDir(),task.getId()),"work");
  return new TaskToolbox(config,task,taskActionClientFactory,emitter,segmentPusher,dataSegmentKiller,dataSegmentMover,dataSegmentArchiver,segmentAnnouncer,newSegmentServerView,queryRunnerFactoryConglomerate,queryExecutorService,monitorScheduler,segmentLoaderFactory.manufacturate(taskWorkDir),objectMapper,taskWorkDir,indexMerger,indexMaker,indexIO);
}
