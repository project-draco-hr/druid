{
  return Initialization.makeInjectorWithModules(injector,ImmutableList.of(new LifecycleModule(),EmitterModule.class,HttpClientModule.global(),CuratorModule.class,new MetricsModule(),new ServerModule(),new JettyServerModule(new QueryJettyServerInitializer()).addResource(StatusResource.class).addResource(ChatHandlerResource.class),new DiscoveryModule(),new ServerViewModule(),new StorageNodeModule(nodeType),new DataSegmentPusherModule(),new AnnouncerModule(),new DruidProcessingModule(),new QueryableModule(ThreadPoolTaskRunner.class),new QueryRunnerFactoryModule(),new IndexingServiceDiscoveryModule(),new AWSModule(),new PeonModule(new ExecutorLifecycleConfig().setTaskFile(new File(taskAndStatusFile.get(0))).setStatusFile(new File(taskAndStatusFile.get(1))))));
}
