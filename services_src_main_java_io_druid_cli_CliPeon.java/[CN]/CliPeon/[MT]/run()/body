{
  try {
    Injector injector=makeInjector();
    Lifecycle lifecycle=initLifecycle(injector);
    try {
      injector.getInstance(ExecutorLifecycle.class).join();
      lifecycle.stop();
    }
 catch (    Throwable t) {
      log.error(t,"Error when starting up.  Failing.");
      System.exit(1);
    }
  }
 catch (  Exception e) {
    throw Throwables.propagate(e);
  }
}
