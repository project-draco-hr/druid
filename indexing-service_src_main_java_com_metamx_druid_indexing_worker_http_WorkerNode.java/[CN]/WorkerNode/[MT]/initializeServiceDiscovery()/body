{
  if (serviceDiscovery == null) {
    final CuratorDiscoveryConfig config=getConfigFactory().build(CuratorDiscoveryConfig.class);
    this.serviceDiscovery=Initialization.makeServiceDiscoveryClient(getCuratorFramework(),config,getLifecycle());
    this.serviceDiscovery=Initialization.makeServiceDiscoveryClient(serviceDiscoveryCuratorFramework,config,getLifecycle());
  }
  if (coordinatorServiceProvider == null) {
    this.coordinatorServiceProvider=Initialization.makeServiceProvider(workerConfig.getMasterService(),serviceDiscovery,getLifecycle());
  }
}
