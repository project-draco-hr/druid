{
  final Closer tearDownCloser=Closer.create();
  tearDownCloser.register(new Closeable(){
    @Override public void close() throws IOException {
      setupTeardownService.shutdownNow();
      try {
        setupTeardownService.awaitTermination(10,TimeUnit.SECONDS);
      }
 catch (      InterruptedException e) {
        Thread.currentThread().interrupt();
        throw new IOException("Interrupted",e);
      }
    }
  }
);
  try {
    setupTeardownService.submit(new Runnable(){
      @Override public void run(){
        try {
          closer.close();
        }
 catch (        IOException e) {
          throw Throwables.propagate(e);
        }
      }
    }
).get(10,TimeUnit.SECONDS);
  }
 catch (  Throwable t) {
    throw closer.rethrow(t);
  }
 finally {
    closer.close();
  }
}
