{
  return new ImmutableDruidServer(metadata,currSize,Collections.unmodifiableMap(Maps.transformValues(dataSources,new Function<DruidDataSource,ImmutableDruidDataSource>(){
    @Override public ImmutableDruidDataSource apply(    DruidDataSource input){
      return input.toImmutableDruidDataSource();
    }
  }
)),Collections.unmodifiableMap(segments));
}
