{
  final CuratorDiscoveryConfig config=getConfigFactory().build(CuratorDiscoveryConfig.class);
  if (serviceDiscovery == null) {
    this.serviceDiscovery=Initialization.makeServiceDiscoveryClient(getCuratorFramework(),config,getLifecycle());
  }
  if (serviceAnnouncer == null) {
    this.serviceAnnouncer=new CuratorServiceAnnouncer(serviceDiscovery);
  }
}
