{
synchronized (tasks) {
    int port=config.getStartPort();
    int maxPortSoFar=-1;
    for (    ForkingTaskRunnerWorkItem taskWorkItem : tasks.values()) {
      if (taskWorkItem.processHolder != null) {
        if (taskWorkItem.processHolder.port > maxPortSoFar) {
          maxPortSoFar=taskWorkItem.processHolder.port;
        }
        if (taskWorkItem.processHolder.port == port) {
          port=maxPortSoFar + 1;
        }
      }
    }
    return port;
  }
}
