{
  if (!outputZipFile.getName().endsWith(".zip")) {
    log.warn("No .zip suffix[%s], putting files from [%s] into it anyway.",outputZipFile,directory);
  }
  final FileOutputStream out=new FileOutputStream(outputZipFile);
  try {
    final long retVal=zip(directory,out);
    out.close();
    return retVal;
  }
  finally {
    Closeables.closeQuietly(out);
  }
}
