{
synchronized (lock) {
    if (started) {
      return;
    }
    insertStatement=String.format(DbConnector.isPostgreSQL(dbi) ? "BEGIN;\n" + "LOCK TABLE %1$s IN SHARE ROW EXCLUSIVE MODE;\n" + "WITH upsert AS (UPDATE %1$s SET payload=:payload WHERE name=:name RETURNING *)\n"+ "    INSERT INTO %1$s (name, payload) SELECT :name, :payload WHERE NOT EXISTS (SELECT * FROM upsert)\n;"+ "COMMIT;" : "INSERT INTO %s (name, payload) VALUES (:name, :payload) ON DUPLICATE KEY UPDATE payload = :payload",configTable);
    poller=new PollingCallable();
    ScheduledExecutors.scheduleWithFixedDelay(exec,new Duration(0),config.get().getPollDuration().toStandardDuration(),poller);
    started=true;
  }
}
